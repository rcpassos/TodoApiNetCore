2025-03-18 23:19:33.424 +00:00 [INF] User profile is available. Using '/Users/rafaelpassos/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-03-18 23:19:33.476 +00:00 [INF] Creating key {fc4394f9-6bc9-442c-a2f1-3fdd936800d0} with creation date 2025-03-18 23:19:33Z, activation date 2025-03-18 23:19:33Z, and expiration date 2025-06-16 23:19:33Z.
2025-03-18 23:19:33.478 +00:00 [WRN] No XML encryptor configured. Key {fc4394f9-6bc9-442c-a2f1-3fdd936800d0} may be persisted to storage in unencrypted form.
2025-03-18 23:19:33.479 +00:00 [INF] Writing data to file '/Users/rafaelpassos/.aspnet/DataProtection-Keys/key-fc4394f9-6bc9-442c-a2f1-3fdd936800d0.xml'.
2025-03-18 23:19:33.504 +00:00 [INF] Now listening on: http://localhost:5020
2025-03-18 23:19:33.506 +00:00 [INF] Application started. Press Ctrl+C to shut down.
2025-03-18 23:19:33.506 +00:00 [INF] Hosting environment: Development
2025-03-18 23:19:33.506 +00:00 [INF] Content root path: /Users/rafaelpassos/Documents/Personal/OpenSource/TodoApi
2025-03-18 23:19:39.076 +00:00 [INF] Request starting HTTP/1.1 GET http://localhost:5020/ - null null
2025-03-18 23:19:39.104 +00:00 [WRN] Failed to determine the https port for redirect.
2025-03-18 23:19:39.124 +00:00 [INF] HTTP GET / responded 404 in 21.0961 ms
2025-03-18 23:19:39.133 +00:00 [INF] Request finished HTTP/1.1 GET http://localhost:5020/ - 404 0 null 57.4047ms
2025-03-18 23:19:39.140 +00:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5020/, Response status code: 404
2025-03-18 23:22:39.664 +00:00 [INF] Application is shutting down...
2025-03-18 23:37:58.097 +00:00 [INF] Executed DbCommand (179ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
CREATE DATABASE [TodoDb];
2025-03-18 23:37:58.214 +00:00 [INF] Executed DbCommand (91ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [TodoDb] SET READ_COMMITTED_SNAPSHOT ON;
END;
2025-03-18 23:37:58.241 +00:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-03-18 23:37:58.242 +00:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-03-18 23:37:58.262 +00:00 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-03-18 23:37:58.296 +00:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-03-18 23:37:58.302 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-03-18 23:37:58.303 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-03-18 23:37:58.341 +00:00 [INF] Executed DbCommand (36ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-03-18 23:37:58.345 +00:00 [INF] Applying migration '20250318224306_InitialCreate'.
2025-03-18 23:37:58.356 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Users] (
    [Id] int NOT NULL IDENTITY,
    [Email] nvarchar(max) NOT NULL,
    [PasswordHash] nvarchar(max) NOT NULL,
    [Role] nvarchar(max) NOT NULL,
    [PasswordResetToken] nvarchar(max) NULL,
    [ResetTokenExpires] datetime2 NULL,
    [StripeCustomerId] nvarchar(max) NULL,
    CONSTRAINT [PK_Users] PRIMARY KEY ([Id])
);
2025-03-18 23:37:58.360 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Tasks] (
    [Id] int NOT NULL IDENTITY,
    [Title] nvarchar(max) NOT NULL,
    [Description] nvarchar(max) NOT NULL,
    [DueDate] datetime2 NULL,
    [Priority] int NOT NULL,
    [IsCompleted] bit NOT NULL,
    [UserId] int NOT NULL,
    CONSTRAINT [PK_Tasks] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Tasks_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2025-03-18 23:37:58.362 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Tasks_UserId] ON [Tasks] ([UserId]);
2025-03-18 23:37:58.378 +00:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20250318224306_InitialCreate', N'9.0.3');
2025-03-18 23:37:58.382 +00:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-03-18 23:48:44.466 +00:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-03-18 23:48:44.487 +00:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-03-18 23:48:44.498 +00:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-03-18 23:48:44.532 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-03-18 23:48:44.540 +00:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-03-18 23:48:44.541 +00:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-03-18 23:48:44.546 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-03-18 23:48:44.549 +00:00 [INF] No migrations were applied. The database is already up to date.
2025-03-18 23:48:44.553 +00:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
